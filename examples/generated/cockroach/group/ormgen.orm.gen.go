// Code generated by ormgen; DO NOT EDIT.
//
// source: group
package group

import (
	"context"
	"strconv"

	ormcommon "github.com/hakadoriya/ormgen/examples/generated/cockroach/ormcommon"
	ormopt "github.com/hakadoriya/ormgen/examples/generated/cockroach/ormopt"
	group_ "github.com/hakadoriya/ormgen/examples/model/group"
)

var (
	DefaultBulkInsertMaxPlaceholdersPerQuery = 2000
	DefaultPlaceholderGenerator              = placeholderGenerator
)

var strconvItoa = strconv.Itoa

type ORM interface {
	// InsertGroup inserts a new Group into the database.
	InsertGroup(ctx context.Context, queryerContext ormcommon.QueryerContext, group *group_.Group) error
	// BulkInsertGroup inserts multiple Group into the database.
	BulkInsertGroup(ctx context.Context, queryerContext ormcommon.QueryerContext, groupSlice []*group_.Group) error
	// GetGroupByPK gets a Group by its primary keys.
	GetGroupByPK(ctx context.Context, queryerContext ormcommon.QueryerContext, id int) (*group_.Group, error)
	// SelectGroupForUpdateByPK locks a Group by its primary keys.
	SelectGroupForUpdateByPK(ctx context.Context, queryerContext ormcommon.QueryerContext, id int) (*group_.Group, error)
	// GetOneGroup returns a Group.
	// If no rows are found, it returns sql.ErrNoRows.
	// If multiple rows are found, it returns ormcommon.ErrNotUnique.
	GetOneGroup(ctx context.Context, queryerContext ormcommon.QueryerContext, opts ...ormopt.QueryOption) (*group_.Group, error)
	// ListGroup returns a slice of Group.
	ListGroup(ctx context.Context, queryerContext ormcommon.QueryerContext, opts ...ormopt.QueryOption) (group_.GroupSlice, error)
	// SelectGroupForUpdate locks a Group.
	SelectGroupForUpdate(ctx context.Context, queryerContext ormcommon.QueryerContext, opts ...ormopt.QueryOption) (group_.GroupSlice, error)
	// UpdateGroup updates a Group.
	UpdateGroup(ctx context.Context, queryerContext ormcommon.QueryerContext, group *group_.Group) error
	// DeleteGroupByPK deletes a Group by its primary keys.
	DeleteGroupByPK(ctx context.Context, queryerContext ormcommon.QueryerContext, id int) error
}

func NewORM(opts ...ORMOption) ORM {
	o := new(_ORM)
	for _, opt := range opts {
		opt.apply(o)
	}
	return o
}

type ORMOption interface {
	apply(o *_ORM)
}

func WithORMOptionHandleErrorFunc(handleErrorFunc func(ctx context.Context, err error) error) ORMOption {
	return &ormOptionHandleErrorFunc{handleErrorFunc: handleErrorFunc}
}

type ormOptionHandleErrorFunc struct {
	handleErrorFunc func(ctx context.Context, err error) error
}

func (o *ormOptionHandleErrorFunc) apply(s *_ORM) {
	s.HandleErrorFunc = o.handleErrorFunc
}

type _ORM struct {
	HandleErrorFunc func(ctx context.Context, err error) error
}

func (o *_ORM) HandleError(ctx context.Context, err error) error {
	if o.HandleErrorFunc != nil {
		return o.HandleErrorFunc(ctx, err)
	}
	return err
}

// placeholderGenerator is cockroach dialect placeholder generator
func placeholderGenerator(i int) string {
	return "$" + strconvItoa(i)
}
